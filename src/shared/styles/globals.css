@layer theme, base, components, utilities;
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/preflight.css' layer(base);
@import 'tailwindcss/utilities.css' layer(utilities);

@custom-variant dark (&:is(.dark *));
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* ===== Background Colors ===== */

  /* Light Mode Backgrounds */
  --color-background-primary: #ffffff;
  --color-background-secondary: #f6f8fa;
  --color-background-tertiary: #ebedf0;
  --color-background-hover: #f3f4f6;
  --color-background-overlay: rgba(255, 255, 255, 0.95);
  --color-background-muted: #f8f9fa;
  --color-background-card: #ffffff;

  /* ===== Text Colors ===== */

  /* Light Mode Text */
  --color-text-primary: #24292f;
  --color-text-secondary: #57606a;
  --color-text-tertiary: #6e7781;
  --color-text-inverse: #ffffff;
  --color-text-muted: #8b949e;
  --color-text-placeholder: #a8a8a8;

  /* ===== Accent & Semantic Colors ===== */

  --color-accent-primary: #58a6ff;
  --color-accent-secondary: #1f6feb;
  --color-accent-success: #3fb950;
  --color-accent-warning: #d29922;
  --color-accent-error: #f85149;
  --color-accent-info: #0969da;

  /* State Colors with opacity variants */
  --color-state-success: var(--color-accent-success);
  --color-state-success-bg: rgba(63, 185, 80, 0.1);
  --color-state-warning: var(--color-accent-warning);
  --color-state-warning-bg: rgba(210, 153, 34, 0.1);
  --color-state-error: var(--color-accent-error);
  --color-state-error-bg: rgba(248, 81, 73, 0.1);
  --color-state-info: var(--color-accent-info);
  --color-state-info-bg: rgba(9, 105, 218, 0.1);

  /* ===== Border Colors ===== */

  --color-border-primary: #d0d7de;
  --color-border-secondary: #e5e5e5;
  --color-border-focus: var(--color-accent-primary);
  --color-border-muted: #f0f0f0;

  /* ===== Shadow & Effects ===== */

  --color-shadow: rgba(31, 35, 40, 0.1);
  --color-shadow-focus: rgba(88, 166, 255, 0.3);

  /* ===== Component Variants ===== */

  /* Button variants */
  --color-button-primary-bg: var(--color-accent-primary);
  --color-button-primary-text: var(--color-text-inverse);
  --color-button-primary-hover: var(--color-accent-secondary);

  --color-button-secondary-bg: var(--color-background-tertiary);
  --color-button-secondary-text: var(--color-text-primary);
  --color-button-secondary-hover: var(--color-background-hover);

  --color-button-outline-border: var(--color-border-primary);
  --color-button-outline-text: var(--color-text-primary);
  --color-button-outline-hover-bg: var(--color-background-hover);

  --color-button-ghost-text: var(--color-text-primary);
  --color-button-ghost-hover-bg: var(--color-background-hover);

  /* Input variants */
  --color-input-bg: var(--color-background-primary);
  --color-input-border: var(--color-border-primary);
  --color-input-border-focus: var(--color-border-focus);
  --color-input-text: var(--color-text-primary);
  --color-input-placeholder: var(--color-text-placeholder);
}

/* ===== Dark Mode Overrides ===== */

.dark {
  /* Background Colors */
  --color-background-primary: #0d1117;
  --color-background-secondary: #161b22;
  --color-background-tertiary: #21262d;
  --color-background-hover: #30363d;
  --color-background-overlay: rgba(13, 17, 23, 0.95);
  --color-background-muted: #1c2128;
  --color-background-card: #161b22;

  /* Text Colors */
  --color-text-primary: #f0f6fc;
  --color-text-secondary: #c9d1d9;
  --color-text-tertiary: #8b949e;
  --color-text-inverse: #0d1117;
  --color-text-muted: #6e7681;
  --color-text-placeholder: #6e7681;

  /* Border Colors */
  --color-border-primary: #30363d;
  --color-border-secondary: #21262d;
  --color-border-muted: #21262d;

  /* Shadow Colors */
  --color-shadow: rgba(0, 0, 0, 0.3);

  /* Component Variants - Dark Mode */
  --color-button-secondary-bg: var(--color-background-tertiary);
  --color-button-secondary-hover: var(--color-background-hover);

  --color-input-bg: var(--color-background-primary);
  --color-input-border: var(--color-border-primary);
}

/* ===== Form Element Resets in Base Layer ===== */

@layer base {
  /* Fix mobile layout issues */
  html,
  body {
    width: 100%;
    overflow-x: hidden;
  }

  * {
    box-sizing: border-box;
  }

  /* Ensure all sections are properly contained */
  section,
  main,
  nav,
  footer {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* Fix code blocks that might overflow */
  pre,
  code {
    max-width: 100%;
    overflow-x: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Reset all form elements */
  select,
  input[type='radio'],
  input[type='checkbox'] {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
  }

  /* Custom select with dropdown arrow */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
    padding-right: 2.5rem !important;
  }

  /* Dark mode select arrow */
  :is(.dark *) select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }

  /* Radio button base */
  input[type='radio'] {
    border-radius: 50%;
    flex-shrink: 0;
  }

  /* Radio button checked state */
  input[type='radio']:checked {
    background-color: var(--color-accent-primary);
    border-color: var(--color-accent-primary);
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
    background-position: center;
    background-repeat: no-repeat;
    background-size: 100% 100%;
  }

  /* Checkbox base */
  input[type='checkbox'] {
    border-radius: 0.25rem;
    flex-shrink: 0;
  }

  /* Checkbox checked state */
  input[type='checkbox']:checked {
    background-color: var(--color-accent-primary);
    border-color: var(--color-accent-primary);
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    background-position: center;
    background-repeat: no-repeat;
    background-size: 75% 75%;
  }

  /* Remove focus rings - let components handle their own focus styles */
  select:focus,
  input[type='radio']:focus,
  input[type='checkbox']:focus {
    outline: none;
    box-shadow: none;
  }
}
